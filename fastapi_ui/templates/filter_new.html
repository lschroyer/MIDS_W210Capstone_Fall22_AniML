{% extends "base.html" %}
{% set active_page = "filter" %}

{% block title %}Filter{% endblock %}

{% block head %}
{{ super() }}


{% endblock %}


{% block page_content %}
<h1 class="cap">Automatic Image Filtering</h1>
<p>No more combing through thousands of false triggers! 
    Add all your images below and we will filter out the images that contain 
    objects of interest from those that are empty or don't contain any 
    objects of interest (e.g. a car). </p>
    <br>

<html>
<head>
    <title>AniML Filtering Empty Images</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="../static/js/filter.js"></script>
    <link rel="stylesheet" href="../static/css/styles.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
        crossorigin="anonymous">
</head>

<body>
    <h2> AniML - Object Detection</h2>
    <p style="text-align: left;">Upload images and click submit to perform filtering with the default YOLOv5 model.
        You can view individual files to see how the model is working. Next you can click the "Review 
        Filtered Image" tab to view and save the filtered results. </p>
    <div class="container">
        <div class="col-sm-12">
            <div class="form-row">
                <div class="form-group col-md-8">
                    <label for="file" id="label_file">&nbsp;</label>
                    <input class="form-control" type="file" id="input_file" multiple />
                </div>
                <div class="form-group col-md-4">
                    <label>&nbsp;</label>
                    <button type="button" class="btn btn-primary btn-block" id="btn-process">Upload and Process</button>
                </div>
            </div>
            <div class="form-row" id="row_results">
                <div class="col-md-12">
                    <div class="form-row" style="margin-top: 10px;">
                        <div class="col-md-auto">
                            <!-- col-md-12 -->
                            <table border="1px solid" id="table_result">
                                <thead>
                                    <th>Task Id</th>
                                    <th>Status</th>
                                    <th>Initial Model Filtering Prediction</th>
                                    <th>Action</th>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <p>
                    Click the view button above to view individual filtering model results. 
                </p>
                <div class="form-row" id="row_detail">
                    <div class="col-md-3"><textarea id="result_txt" style="height: 800px; font-size: 12px;"></textarea></div>
                    <div class="col-md-9"><a id="result_link"><img id="result_img" width="600px" /></a></div>
                </div>

            </div>
        </div>

    </body>

    <!-- <input type="button" value="Download PDF File" onclick="DownloadFile('Sample.pdf')" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
    <script type="text/javascript">
        function DownloadFile(fileName) {
            //Set the File URL.
            // var url = "Files/" + fileName;
            var url = "../../data/filter_prediction" + fileName;
            // var url = result_link;
 
            $.ajax({
                url: url,
                cache: false,
                xhr: function () {
                    var xhr = new XMLHttpRequest();
                    xhr.onreadystatechange = function () {
                        if (xhr.readyState == 2) {
                            if (xhr.status == 200) {
                                xhr.responseType = "blob";
                            } else {
                                xhr.responseType = "text";
                            }
                        }
                    };
                    return xhr;
                },
                success: function (data) {
                    //Convert the Byte Data to BLOB object.
                    var blob = new Blob([data], { type: "application/octetstream" });

                    //Check the Browser type and download the File.
                    var isIE = false || !!document.documentMode;
                    if (isIE) {
                        window.navigator.msSaveBlob(blob, fileName);
                    } else {
                        // var url = window.URL || window.webkitURL;
                        var url = result_link;

                        link = url.createObjectURL(blob);
                        var a = $("<a />");
                        a.attr("download", fileName);
                        a.attr("href", link);
                        $("body").append(a);
                        a[0].click();
                        $("body").remove(a);
                    }
                }
            });
        };
    </script> -->


</html>


{% endblock %}

{% block scripts %}
{{ super() }}


{% endblock %}